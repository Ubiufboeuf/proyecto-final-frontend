---
import { SideBar } from '@/components/SideBar'
import { Navigation } from '@/components/Navigation'
import { Footer } from '@/components/Footer'

interface Props {
	title: string
}

const { title } = Astro.props
const { originPathname: pathname } = Astro
---

<html lang='es'>
	<head>
		<meta charset='utf-8' />
		<link rel='icon' type='image/svg+xml' href='/favicon.webp' />
		<meta name='viewport' content='width=device-width' />
		<meta name='description' content='Web no oficial de Berruti Turismo. Proyecto de fin de aÃ±o' />
		<title>{title ? `${title} - Berruti Turismo` : title}</title>
	</head>
	<body class='relative h-[2000px] pt-20 bg-background text-text'>
		<SideBar pathname={pathname} />
		<Navigation pathname={pathname} />
		<slot />
		<Footer />
	</body>
</html>

<style is:global>
@import "tailwindcss";

@theme {
  --font-sans: "Inter", ui-sans-serif, system-ui, sans-serif,
    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";

  --color-primary: #db550c;
  --color-primary-gradient-start: #F97316;
  --color-primary-gradient-end: #C2410C;
  --color-background: #eee;
  --color-text: #1F2937;

  --breakpoint-ml: 56rem;
  --breakpoint-ms: 37rem;

  --container-navbar: 80px;
  --container-sidebar: 288px;

  --spacing-navbar: 80px;
  --spacing-sidebar: 288px;
}

@custom-variant touch {
  @media (pointer: coarse) {
    @slot;
  }
}

@custom-variant mobile {
  &:where(.is-mobile-ua *) {
    @slot;
  }
}

html,
body {
  @media (prefers-color-scheme: dark) {
    color-scheme: dark;
  }
}

h1,
h2,
h3
h4,
h5,
h6 {
  text-wrap: balance;
}

p {
  text-wrap: pretty;
}
</style>

<script type='module'>
function detectDeviceType() {
	let deviceType = localStorage.getItem('deviceType')
	if (deviceType) {
		document.body.classList.add(deviceType)
		return
	}
	
	const ua = navigator.userAgent
	const mobileRegex = /(Mobi|Android(?!.*Nexus 7)|iPhone|iPod|Windows Phone|BlackBerry|Symbian|IEMobile|Opera Mini|Fennec|webOS|hpwos|avantgo|bada|blazer|compal|elaine|hiptop|kindle|lge|maemo|midp|mmp|netfront|palm|phone|plucker|pocket|psp|series60|treo|up\.browser|up\.link|vodafone|wap|windows ce|xda|xiino)/i
	const tabletRegex = /(iPad|Android(?!.*mobile)|Kindle|Playbook|Silk|Tablet|hpw|webos|Nexus 7)/i

	if (mobileRegex.test(ua) && !/iPad/i.test(ua)) {
		deviceType = 'is-mobile-ua'
	} else if (tabletRegex.test(ua)) {
		deviceType = 'is-tablet-ua'
	} else {
		deviceType = 'is-laptop-ua'
	}

	document.body.classList.add(deviceType)
	localStorage.setItem('deviceType', deviceType)
}

detectDeviceType()
</script>