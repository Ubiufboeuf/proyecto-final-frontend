---
import type { Ruta, HorarioDestacado } from '@/env'
import Layout from '@/layouts/Layout.astro'
import { RouteCard } from '@/components/RouteCard'
import { RoutesModal } from '@/components/RoutesModal'
import { IconBus, IconClock, IconMapPin } from '@/components/Icons'
import { Icon } from '@/components/Icon'
import { getAllRoutes } from '@/services/routeService'
import FeaturedScheduleLight from '@/components/FeaturedScheduleLight.astro'
import FeaturedScheduleDark from '@/components/FeaturedScheduleDark.astro'

let rutas: Ruta[] = []
try {
  rutas = await getAllRoutes()
} catch (err) {
  console.error(err)
}

const horariosDestacados: HorarioDestacado[] = [
  {
    title: 'Servicios Matutinos',
    description: 'Primeras salidas del día',
    hours: ['06:00', '06:30', '07:00', '07:30'],
    bgColor: '#EFF6FF',
    bg2Color: '#DBEAFE',
    mainColor: '#1E40AF',
    color: '#1D4ED8',
    darkColor: '#4d75f5',
  },
  {
    title: 'Servicios Ejecutivos',
    description: 'Horarios premium',
    hours: ['08:00', '14:00', '18:00', '22:00'],
    bgColor: '#F0FDF4',
    bg2Color: '#DCFCE7',
    mainColor: '#166534',
    color: '#15803D',
    darkColor: '#38b763'
  },
  {
    title: 'Servicios Nocturnos',
    description: 'Últimas salidas',
    hours: ['20:00', '21:00', '22:00', '22:30'],
    bgColor: '#FFF7ED',
    bg2Color: '#FFEDD5',
    mainColor: '#9A3412',
    color: '#C2410C',
    darkColor: '#ef623b'
  }
]

const informacionImportante = [
  {
    Icon: IconMapPin,
    title: 'Terminal Principal',
    description: 'Terminal Tres Cruces Montevideo'
  },
  {
    Icon: IconClock,
    title: 'Recomendaciones',
    description: 'Llegar 30 min antes para viajes nacionales'
  },
  {
    Icon: IconBus,
    title: 'Equipaje',
    description: 'Hasta 20kg incluido en el pasaje'
  }
]
---

<Layout title='Rutas'>
  <RoutesModal client:idle />
	<section class='w-full h-fit py-12 pt-20 flex flex-col items-center gap-4'>
		<h1 class='text-4xl font-bold text-gray-800 dark:text-gray-50 text-center'>Nuestras Rutas</h1>
		<p class='text-gray-600 dark:text-gray-300 text-lg text-center max-w-160'>Conectamos a Uruguay con viajes departamentales e interdepartamentales.</p>
	</section>
	<section class='overflow-hidden w-full mx-auto max-w-screen-2xl h-fit p-4 pb-12 flex flex-col gap-6'>
		<div class='grid w-full h-fit grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'>
			{
				rutas.map((ruta) => <RouteCard {...ruta} client:load />)
			}
		</div>
	</section>
  <section class='w-full h-fit px-4 pb-8 flex justify-center max-w-screen-2xl mx-auto'>
    <div class='bg-white dark:bg-gray-700/50 w-full h-fit py-8 rounded-xl shadow-md px-8'>
      <h1 class='text-2xl font-bold text-gray-800 dark:text-gray-50 text-center'>Horarios Destacados</h1>
      <div class='w-full grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 h-fit place-items-center py-6 gap-6'>
        {
          horariosDestacados.map((horario) => (
            <FeaturedScheduleLight schedule={horario} />
            <FeaturedScheduleDark schedule={horario} />
          ))
        }
      </div>
      <p class='text-sm text-gray-600 dark:text-gray-200 text-center mb-2'>
        Los horarios pueden variar según la temporada y condiciones especiales.
      </p>
      <p class='text-sm text-gray-600 dark:text-gray-200 text-center'>Se recomienda confirmar horarios al momento de la compra del pasaje.</p>
    </div>
  </section>
  <section class='w-full h-fit px-4 pb-8 flex justify-center max-w-screen-2xl mx-auto'>
    <div class='bg-white dark:bg-gray-700/50 w-full h-fit py-4 pt-8 gap-2 rounded-xl shadow-md'>
      <h1 class='text-2xl font-bold text-gray-800 dark:text-gray-50 text-center'>Información Importante</h1>
      <div class='w-full grid md:grid-cols-3 grid-cols-1 h-fit min-h-fit place-items-center py-4 px-8 gap-4'>
        {
          informacionImportante.map(({ Icon: InfoIcon, description, title }) => (
            <article class='w-fit h-fit flex flex-col items-center px-4 py-2 gap-2 rounded-lg'>
              <Icon class='size-8 text-orange-500'>
                <InfoIcon />
              </Icon>
              <h1 class='text-md font-semibold text-gray-800 dark:text-gray-100'>{title}</h1>
              <p class='text-[13px] text-gray-600 dark:text-gray-300 text-center'>{description}</p>
            </article>
          ))
        }
      </div>
    </div>
  </section>
  <section class='w-full h-fit min-h-fit py-8 px-4 pb-16 flex flex-col gap-4 justify-center items-center'>
    <h1 class='text-2xl font-bold text-gray-800 dark:text-gray-50 text-center'>¿No encuentras tu destino?</h1>
    <p class='text-gray-700 dark:text-gray-300 pb-4 text-center'>Contáctanos para consultar sobre rutas especiales o conexiones</p>
      <a href='/contact' class='h-fit w-fit p-3 px-8 rounded-lg transition-colors cursor-pointer bg-orange-500 text-white hover:bg-orange-600 touch:active:bg-orange-600 dark:bg-orange-600 dark:hover:bg-orange-600/80 dark:touch:active:bg-orange-600/80'>Consultar Ruta</a>
  </section>
</Layout>